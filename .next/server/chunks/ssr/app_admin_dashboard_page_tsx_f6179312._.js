module.exports=[26086,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68169),e=a.i(3130),f=a.i(54161),g=a.i(69240),h=a.i(58042),i=a.i(94222),j=a.i(54419),k=a.i(59854),l=a.i(48662),m=a.i(64321),n=a.i(27165),o=a.i(67149),p=a.i(554),q=a.i(31760),r=["axis"],s=(0,c.forwardRef)((a,b)=>c.createElement(q.CartesianChart,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:r,tooltipPayloadSearcher:p.arrayTooltipSearcher,categoricalChartProps:a,ref:b})),t=c,u=a.i(98621),v=a.i(88949),w=a.i(36319),x=a.i(71555),y=a.i(68932),z=a.i(37082),A=a.i(56295),B=a.i(53242),C=a.i(12791),D=a.i(83663),E=a.i(17913),F=a.i(98382),G=a.i(25392),H=a.i(44381),I=a.i(98563),J=a.i(12168),K=(a,b,c,d)=>(0,J.selectAxisWithScale)(a,"xAxis",b,d),L=(a,b,c,d)=>(0,J.selectTicksOfGraphicalItem)(a,"xAxis",b,d),M=(a,b,c,d)=>(0,J.selectAxisWithScale)(a,"yAxis",c,d),N=(a,b,c,d)=>(0,J.selectTicksOfGraphicalItem)(a,"yAxis",c,d),O=(0,H.createSelector)([F.selectChartLayout,K,M,L,N],(a,b,c,d,e)=>(0,A.isCategoricalAxis)(a,"xAxis")?(0,A.getBandSizeOfAxis)(b,d,!1):(0,A.getBandSizeOfAxis)(c,e,!1));function P(a){return"line"===a.type}var Q=(0,H.createSelector)([J.selectUnfilteredCartesianItems,(a,b,c,d,e)=>e],(a,b)=>a.filter(P).find(a=>a.id===b)),R=(0,H.createSelector)([F.selectChartLayout,K,M,L,N,Q,O,I.selectChartDataWithIndexesIfNotInPanoramaPosition4],(a,b,c,d,e,f,g,h)=>{var i,{chartData:j,dataStartIndex:k,dataEndIndex:l}=h;if(null!=f&&null!=b&&null!=c&&null!=d&&null!=e&&0!==d.length&&0!==e.length&&null!=g&&("horizontal"===a||"vertical"===a)){var{dataKey:m,data:n}=f;if(null!=(i=null!=n&&n.length>0?n:null==j?void 0:j.slice(k,l+1)))return function(a){var{layout:b,xAxis:c,yAxis:d,xAxisTicks:e,yAxisTicks:f,dataKey:g,bandSize:h,displayedData:i}=a;return i.map((a,i)=>{var j=(0,A.getValueByDataKey)(a,g);if("horizontal"===b){var k=(0,A.getCateCoordinateOfLine)({axis:c,ticks:e,bandSize:h,entry:a,index:i}),l=(0,y.isNullish)(j)?null:d.scale.map(j);return{x:k,y:null!=l?l:null,value:j,payload:a}}var m=(0,y.isNullish)(j)?null:c.scale.map(j),n=(0,A.getCateCoordinateOfLine)({axis:d,ticks:f,bandSize:h,entry:a,index:i});return null==m||null==n?null:{x:m,y:n,value:j,payload:a}}).filter(Boolean)}({layout:a,xAxis:b,yAxis:c,xAxisTicks:d,yAxisTicks:e,dataKey:m,bandSize:g,displayedData:i})}}),S=a.i(77368),T=a.i(92430),U=a.i(62320),V=a.i(87293),W=a.i(36745),X=a.i(46780),Y=a.i(77025),Z=a.i(72853),$=a.i(76342),_=a.i(7038),aa=a.i(10576),ab=a.i(56998),ac=a.i(96268),ad=a.i(31080),ae=a.i(95272),af=["id"],ag=["type","layout","connectNulls","needClip","shape"],ah=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function ai(){return(ai=Object.assign.bind()).apply(null,arguments)}function aj(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function ak(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?aj(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):aj(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function al(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(-1!==b.indexOf(d))continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],-1===b.indexOf(c)&&({}).propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}var am=t.memo(a=>{var{dataKey:b,data:c,stroke:d,strokeWidth:e,fill:f,name:g,hide:h,unit:i,tooltipType:j,id:k}=a,l={dataDefinedOnItem:c,getPosition:y.noop,settings:{stroke:d,strokeWidth:e,fill:f,dataKey:b,nameKey:void 0,name:(0,A.getTooltipNameProp)(g,b),hide:h,type:j,color:d,unit:i,graphicalItemId:k}};return t.createElement(C.SetTooltipEntrySettings,{tooltipEntrySettings:l})}),an=(a,b)=>"".concat(b,"px ").concat(a-b,"px");function ao(a){var{clipPathId:b,points:c,props:d}=a,{dot:e,dataKey:f,needClip:g}=d,{id:h}=d,i=al(d,af),j=(0,Z.svgPropertiesNoEvents)(i);return t.createElement(x.Dots,{points:c,dot:e,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:f,baseProps:j,needClip:g,clipPathId:b})}function ap(a){var{showLabels:b,children:c,points:d}=a,e=(0,t.useMemo)(()=>null==d?void 0:d.map(a=>{var b,c,d={x:null!=(b=a.x)?b:0,y:null!=(c=a.y)?c:0,width:0,lowerWidth:0,upperWidth:0,height:0};return ak(ak({},d),{},{value:a.value,payload:a.payload,viewBox:d,parentViewBox:void 0,fill:void 0})}),[d]);return t.createElement(w.CartesianLabelListContextProvider,{value:b?e:void 0},c)}function aq(a){var{clipPathId:b,pathRef:c,points:d,strokeDasharray:e,props:f}=a,{type:g,layout:h,connectNulls:i,needClip:j,shape:k}=f,l=al(f,ag),m=ak(ak({},(0,_.svgPropertiesAndEvents)(l)),{},{fill:"none",className:"recharts-line-curve",clipPath:j?"url(#clipPath-".concat(b,")"):void 0,points:d,type:g,layout:h,connectNulls:i,strokeDasharray:null!=e?e:f.strokeDasharray});return t.createElement(t.Fragment,null,(null==d?void 0:d.length)>1&&t.createElement(ab.Shape,ai({shapeType:"curve",option:k},m,{pathRef:c})),t.createElement(ao,{points:d,clipPathId:b,props:f}))}function ar(a){var{clipPathId:b,props:c,pathRef:d,previousPointsRef:e,longestAnimatedLengthRef:f}=a,{points:g,strokeDasharray:h,isAnimationActive:i,animationBegin:j,animationDuration:k,animationEasing:l,animateNewValues:m,width:n,height:o,onAnimationEnd:p,onAnimationStart:q}=c,r=e.current,s=(0,U.useAnimationId)(g,"recharts-line-"),u=(0,t.useRef)(s),[v,x]=(0,t.useState)(!1),z=(0,t.useCallback)(()=>{"function"==typeof p&&p(),x(!1)},[p]),A=(0,t.useCallback)(()=>{"function"==typeof q&&q(),x(!0)},[q]),B=function(a){try{return a&&a.getTotalLength&&a.getTotalLength()||0}catch(a){return 0}}(d.current),C=(0,t.useRef)(0);u.current!==s&&(C.current=f.current,u.current=s);var D=C.current;return t.createElement(ap,{points:g,showLabels:!v},c.children,t.createElement($.JavascriptAnimate,{animationId:s,begin:j,duration:k,isActive:i,easing:l,onAnimationEnd:z,onAnimationStart:A,key:s},a=>{var j,k=Math.min((0,y.interpolate)(D,B+D,a),B);if(j=i?h?((a,b,c)=>{var d=c.reduce((a,b)=>a+b);if(!d)return an(b,a);for(var e=Math.floor(a/d),f=a%d,g=b-a,h=[],i=0,j=0;i<c.length;j+=null!=(k=c[i])?k:0,++i){var k,l=c[i];if(null!=l&&j+l>f){h=[...c.slice(0,i),f-j];break}}var m=h.length%2==0?[0,g]:[g];return[...function(a,b){for(var c=a.length%2!=0?[...a,0]:a,d=[],e=0;e<b;++e)d=[...d,...c];return d}(c,e),...h,...m].map(a=>"".concat(a,"px")).join(", ")})(k,B,"".concat(h).split(/[,\s]+/gim).map(a=>parseFloat(a))):an(B,k):null==h?void 0:String(h),a>0&&B>0&&(e.current=g,f.current=Math.max(f.current,k)),r){var l=r.length/g.length,p=1===a?g:g.map((b,c)=>{var d=Math.floor(c*l);if(r[d]){var e=r[d];return ak(ak({},b),{},{x:(0,y.interpolate)(e.x,b.x,a),y:(0,y.interpolate)(e.y,b.y,a)})}return m?ak(ak({},b),{},{x:(0,y.interpolate)(2*n,b.x,a),y:(0,y.interpolate)(o/2,b.y,a)}):ak(ak({},b),{},{x:b.x,y:b.y})});return e.current=p,t.createElement(aq,{props:c,points:p,clipPathId:b,pathRef:d,strokeDasharray:j})}return t.createElement(aq,{props:c,points:g,clipPathId:b,pathRef:d,strokeDasharray:j})}),t.createElement(w.LabelListFromLabelProp,{label:c.label}))}function as(a){var{clipPathId:b,props:c}=a,d=(0,t.useRef)(null),e=(0,t.useRef)(0),f=(0,t.useRef)(null);return t.createElement(ar,{props:c,clipPathId:b,previousPointsRef:d,longestAnimatedLengthRef:e,pathRef:f})}var at=(a,b)=>{var c,d;return{x:null!=(c=a.x)?c:void 0,y:null!=(d=a.y)?d:void 0,value:a.value,errorVal:(0,A.getValueByDataKey)(a.payload,b)}};class au extends t.Component{render(){var{hide:a,dot:b,points:c,className:d,xAxisId:e,yAxisId:f,top:g,left:h,width:i,height:j,id:k,needClip:l,zIndex:m}=this.props;if(a)return null;var n=(0,u.clsx)("recharts-line",d),{r:o,strokeWidth:p}=(0,aa.getRadiusAndStrokeWidthFromDot)(b),q=(0,z.isClipDot)(b),r=2*o+p,s=l?"url(#clipPath-".concat(q?"":"dots-").concat(k,")"):void 0;return t.createElement(ac.ZIndexLayer,{zIndex:m},t.createElement(v.Layer,{className:n},l&&t.createElement("defs",null,t.createElement(E.GraphicalItemClipPath,{clipPathId:k,xAxisId:e,yAxisId:f}),!q&&t.createElement("clipPath",{id:"clipPath-dots-".concat(k)},t.createElement("rect",{x:h-r/2,y:g-r/2,width:i+r,height:j+r}))),t.createElement(D.SetErrorBarContext,{xAxisId:e,yAxisId:f,data:c,dataPointFormatter:at,errorBarOffset:0},t.createElement(as,{props:this.props,clipPathId:k}))),t.createElement(B.ActivePoints,{activeDot:this.props.activeDot,points:c,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:s}))}}var av={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:ad.DefaultZIndexes.line,type:"linear"};function aw(a){var b=(0,V.resolveDefaultProps)(a,av),{activeDot:c,animateNewValues:d,animationBegin:e,animationDuration:f,animationEasing:g,connectNulls:h,dot:i,hide:j,isAnimationActive:k,label:l,legendType:m,xAxisId:n,yAxisId:o,id:p}=b,q=al(b,ah),{needClip:r}=(0,E.useNeedsClip)(n,o),s=(0,W.usePlotArea)(),u=(0,F.useChartLayout)(),v=(0,G.useIsPanorama)(),w=(0,S.useAppSelector)(a=>R(a,n,o,v,p));if("horizontal"!==u&&"vertical"!==u||null==w||null==s)return null;var{height:x,width:y,x:z,y:A}=s;return t.createElement(au,ai({},q,{id:p,connectNulls:h,dot:i,activeDot:c,animateNewValues:d,animationBegin:e,animationDuration:f,animationEasing:g,isAnimationActive:k,hide:j,label:l,legendType:m,xAxisId:n,yAxisId:o,points:w,layout:u,height:x,width:y,left:z,top:A,needClip:r}))}var ax=t.memo(function(a){var b=(0,V.resolveDefaultProps)(a,av),c=(0,G.useIsPanorama)();return t.createElement(X.RegisterGraphicalItemId,{id:b.id,type:"line"},a=>t.createElement(t.Fragment,null,t.createElement(T.SetLegendPayload,{legendPayload:(a=>{var{dataKey:b,name:c,stroke:d,legendType:e,hide:f}=a;return[{inactive:f,dataKey:b,type:e,color:d,value:(0,A.getTooltipNameProp)(c,b),payload:a}]})(b)}),t.createElement(am,{dataKey:b.dataKey,data:b.data,stroke:b.stroke,strokeWidth:b.strokeWidth,fill:b.fill,name:b.name,hide:b.hide,unit:b.unit,tooltipType:b.tooltipType,id:a}),t.createElement(Y.SetCartesianGraphicalItem,{type:"line",id:a,data:b.data,xAxisId:b.xAxisId,yAxisId:b.yAxisId,zAxisId:0,dataKey:b.dataKey,hide:b.hide,isPanorama:c}),t.createElement(aw,ai({},b,{id:a}))))},ae.propsAreEqual);ax.displayName="Line";var ay=a.i(4720);let az=(0,a.i(70106).default)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);var aA=a.i(41710),aB=a.i(59165);let aC=["#06b6d4","#f59e0b","#ef4444","#8b5cf6","#22c55e"];function aD(){let[a,p]=(0,c.useState)([]),[q,r]=(0,c.useState)([]),[t,u]=(0,c.useState)(!0),v=(0,g.createBrowserClient)();(0,c.useEffect)(()=>{(async()=>{let{data:a}=await v.from("reports").select("*").order("created_at",{ascending:!1}),{data:b}=await v.from("announcements").select("*").order("created_at",{ascending:!1});a&&p(a),b&&r(b),u(!1)})()},[v]);let w=a.reduce((a,b)=>{let c=a.find(a=>a.name===b.bullying_type);return c?c.value++:a.push({name:b.bullying_type||"Unknown",value:1}),a},[]);a.reduce((a,b)=>{let c=a.find(a=>a.name===b.status);return c?c.value++:a.push({name:b.status||"pending",value:1}),a},[]);let x=Array.from({length:7},(b,c)=>{let d=new Date;d.setDate(d.getDate()-(6-c));let e=d.toISOString().split("T")[0],f=a.filter(a=>a.created_at.split("T")[0]===e).length;return{day:d.toLocaleDateString("en-US",{weekday:"short"}),reports:f}}),y=[{title:"Total Reports",value:a.length,icon:ay.FileText,color:"text-cyan-400",bgColor:"bg-cyan-500/20"},{title:"Pending Review",value:a.filter(a=>"pending"===a.status).length,icon:aA.Clock,color:"text-amber-400",bgColor:"bg-amber-500/20"},{title:"Resolved Cases",value:a.filter(a=>"resolved"===a.status).length,icon:az,color:"text-green-400",bgColor:"bg-green-500/20"},{title:"Active Announcements",value:q.filter(a=>a.is_active).length,icon:aB.Megaphone,color:"text-purple-400",bgColor:"bg-purple-500/20"}];return(0,b.jsx)(d.AdminLayout,{children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Dashboard Overview"}),(0,b.jsx)("p",{className:"text-slate-400",children:"Monitor bullying reports and manage counselor communications"})]}),(0,b.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:y.map(a=>(0,b.jsx)(e.Card,{className:"bg-slate-800/50 border-slate-700",children:(0,b.jsx)(e.CardContent,{className:"p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:`p-2 rounded-lg ${a.bgColor}`,children:(0,b.jsx)(a.icon,{className:`w-5 h-5 ${a.color}`})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-2xl font-bold text-white",children:a.value}),(0,b.jsx)("p",{className:"text-xs text-slate-400",children:a.title})]})]})})},a.title))}),(0,b.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,b.jsxs)(e.Card,{className:"bg-slate-800/50 border-slate-700",children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsx)(e.CardTitle,{className:"text-white",children:"Weekly Report Trend"}),(0,b.jsx)(e.CardDescription,{className:"text-slate-400",children:"Reports submitted in the last 7 days"})]}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)("div",{className:"h-64",children:(0,b.jsx)(l.ResponsiveContainer,{width:"100%",height:"100%",children:(0,b.jsxs)(s,{data:x,children:[(0,b.jsx)(j.CartesianGrid,{strokeDasharray:"3 3",stroke:"#334155"}),(0,b.jsx)(h.XAxis,{dataKey:"day",stroke:"#94a3b8",fontSize:12}),(0,b.jsx)(i.YAxis,{stroke:"#94a3b8",fontSize:12}),(0,b.jsx)(k.Tooltip,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #334155",borderRadius:"8px"},labelStyle:{color:"#f8fafc"}}),(0,b.jsx)(ax,{type:"monotone",dataKey:"reports",stroke:"#06b6d4",strokeWidth:2,dot:{fill:"#06b6d4"}})]})})})})]}),(0,b.jsxs)(e.Card,{className:"bg-slate-800/50 border-slate-700",children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsx)(e.CardTitle,{className:"text-white",children:"Bullying Type Distribution"}),(0,b.jsx)(e.CardDescription,{className:"text-slate-400",children:"Breakdown by incident category"})]}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)("div",{className:"h-64",children:w.length>0?(0,b.jsx)(l.ResponsiveContainer,{width:"100%",height:"100%",children:(0,b.jsxs)(m.PieChart,{children:[(0,b.jsx)(n.Pie,{data:w,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"value",label:({name:a,percents:b})=>`${a} ${(100*b).toFixed(0)}%`,labelLine:!1,children:w.map((a,c)=>(0,b.jsx)(o.Cell,{fill:aC[c%aC.length]},`cell-${c}`))}),(0,b.jsx)(k.Tooltip,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #334155",borderRadius:"8px"}})]})}):(0,b.jsx)("div",{className:"h-full flex items-center justify-center text-slate-500",children:"No data available"})})})]})]}),(0,b.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,b.jsxs)(e.Card,{className:"bg-slate-800/50 border-slate-700",children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsx)(e.CardTitle,{className:"text-white",children:"Recent Reports"}),(0,b.jsx)(e.CardDescription,{className:"text-slate-400",children:"Latest submitted incidents"})]}),(0,b.jsx)(e.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-3",children:[a.slice(0,5).map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-700/30 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-white truncate",children:a.bullying_type||"Incident Report"}),(0,b.jsx)("p",{className:"text-xs text-slate-400",children:new Date(a.created_at).toLocaleDateString()})]}),(0,b.jsx)(f.Badge,{variant:"outline",className:"resolved"===a.status?"border-green-500 text-green-400":"in_progress"===a.status?"border-amber-500 text-amber-400":"border-slate-500 text-slate-400",children:a.status||"pending"})]},a.id)),0===a.length&&(0,b.jsx)("p",{className:"text-center text-slate-500 py-4",children:"No reports yet"})]})})]}),(0,b.jsxs)(e.Card,{className:"bg-slate-800/50 border-slate-700",children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsx)(e.CardTitle,{className:"text-white",children:"Counselor Updates"}),(0,b.jsx)(e.CardDescription,{className:"text-slate-400",children:"Recent announcements and messages"})]}),(0,b.jsx)(e.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-3",children:[q.slice(0,5).map(a=>(0,b.jsxs)("div",{className:"p-3 bg-slate-700/30 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-white",children:a.title}),a.is_active&&(0,b.jsx)(f.Badge,{className:"bg-green-500/20 text-green-400 border-0",children:"Active"})]}),(0,b.jsx)("p",{className:"text-xs text-slate-400 line-clamp-2",children:a.content})]},a.id)),0===q.length&&(0,b.jsx)("p",{className:"text-center text-slate-500 py-4",children:"No announcements yet"})]})})]})]})]})})}a.s(["default",()=>aD],26086)}];

//# sourceMappingURL=app_admin_dashboard_page_tsx_f6179312._.js.map