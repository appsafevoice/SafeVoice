module.exports=[50244,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68169),e=a.i(3130),f=a.i(40695),g=a.i(5522),h=a.i(17171),i=a.i(46893),j=a.i(7554),k=a.i(70121),l=a.i(50104),m=a.i(25152),n=a.i(77994),o=a.i(3688),p=a.i(30553),q="Switch",[r,s]=(0,l.createContextScope)(q),[t,u]=r(q),v=c.forwardRef((a,d)=>{let{__scopeSwitch:e,name:f,checked:g,defaultChecked:h,required:i,disabled:l,value:n="on",onCheckedChange:o,form:r,...s}=a,[u,v]=c.useState(null),w=(0,k.useComposedRefs)(d,a=>v(a)),x=c.useRef(!1),A=!u||r||!!u.closest("form"),[B,C]=(0,m.useControllableState)({prop:g,defaultProp:h??!1,onChange:o,caller:q});return(0,b.jsxs)(t,{scope:e,checked:B,disabled:l,children:[(0,b.jsx)(p.Primitive.button,{type:"button",role:"switch","aria-checked":B,"aria-required":i,"data-state":z(B),"data-disabled":l?"":void 0,disabled:l,value:n,...s,ref:w,onClick:(0,j.composeEventHandlers)(a.onClick,a=>{C(a=>!a),A&&(x.current=a.isPropagationStopped(),x.current||a.stopPropagation())})}),A&&(0,b.jsx)(y,{control:u,bubbles:!x.current,name:f,value:n,checked:B,required:i,disabled:l,form:r,style:{transform:"translateX(-100%)"}})]})});v.displayName=q;var w="SwitchThumb",x=c.forwardRef((a,c)=>{let{__scopeSwitch:d,...e}=a,f=u(w,d);return(0,b.jsx)(p.Primitive.span,{"data-state":z(f.checked),"data-disabled":f.disabled?"":void 0,...e,ref:c})});x.displayName=w;var y=c.forwardRef(({__scopeSwitch:a,control:d,checked:e,bubbles:f=!0,...g},h)=>{let i=c.useRef(null),j=(0,k.useComposedRefs)(i,h),l=(0,n.usePrevious)(e),m=(0,o.useSize)(d);return c.useEffect(()=>{let a=i.current;if(!a)return;let b=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(l!==e&&b){let c=new Event("click",{bubbles:f});b.call(a,e),a.dispatchEvent(c)}},[l,e,f]),(0,b.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:e,...g,tabIndex:-1,ref:j,style:{...g.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function z(a){return a?"checked":"unchecked"}y.displayName="SwitchBubbleInput";var A=a.i(97895);function B({className:a,...c}){return(0,b.jsx)(v,{"data-slot":"switch",className:(0,A.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",a),...c,children:(0,b.jsx)(x,{"data-slot":"switch-thumb",className:"bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0"})})}var C=a.i(65733),D=a.i(87682),E=a.i(65602),F=a.i(69240),G=a.i(70106);let H=(0,G.default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),I=(0,G.default)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),J=(0,G.default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var K=a.i(23312);let L=(0,G.default)("Quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]);var M=a.i(59165),N=a.i(16201),O=a.i(92e3),P=a.i(73320),Q=a.i(33508);function R(){let[a,j]=(0,c.useState)([]),[k,l]=(0,c.useState)(!0),[m,n]=(0,c.useState)(!1),[o,p]=(0,c.useState)(null),[q,r]=(0,c.useState)(""),[s,t]=(0,c.useState)(""),u=(0,F.createBrowserClient)(),[v,w]=(0,c.useState)(""),[x,y]=(0,c.useState)(""),[z,A]=(0,c.useState)("announcement"),[G,R]=(0,c.useState)(""),[S,T]=(0,c.useState)(null),[U,V]=(0,c.useState)(null),[W,X]=(0,c.useState)(!1),[Y,Z]=(0,c.useState)(!0),[$,_]=(0,c.useState)(!1);(0,c.useEffect)(()=>{aa()},[]);let aa=async()=>{let{data:a}=await u.from("announcements").select("*").order("created_at",{ascending:!1});a&&j(a),l(!1)},ab=()=>{w(""),y(""),A("announcement"),R(""),T(null),V(null),Z(!0),p(null)},ac=a=>{a?(p(a),w(a.title),y(a.content),A(a.type),R(a.image_url||""),V(a.image_url||null),Z(a.is_active)):ab(),n(!0)},ad=async a=>{let b=a.name.split(".").pop(),c=`${Date.now()}-${Math.random().toString(36).substring(7)}.${b}`,d=`announcements/${c}`,{error:e}=await u.storage.from("announcement-images").upload(d,a);if(e)return console.log("[v0] Error uploading image:",e),null;let{data:f}=u.storage.from("announcement-images").getPublicUrl(d);return f.publicUrl},ae=async()=>{let a;_(!0),t("");let b=G;if(S){X(!0);let a=await ad(S);if(X(!1),a)b=a;else{t("Failed to upload image. Please try again."),setTimeout(()=>t(""),5e3),_(!1);return}}let c={title:v,content:x,type:z,image_url:b||null,is_active:Y};(a=o?(await u.from("announcements").update(c).eq("id",o.id)).error:(await u.from("announcements").insert([c])).error)?(console.log("[v0] Error saving announcement:",a),t(a.message||"Failed to save content. Please try again."),setTimeout(()=>t(""),5e3)):(r(o?"Content updated successfully!":"Content created successfully!"),setTimeout(()=>r(""),3e3),aa(),n(!1),ab()),_(!1)},af=async a=>{if(!confirm("Are you sure you want to delete this content?"))return;let{error:b}=await u.from("announcements").delete().eq("id",a);b||(r("Content deleted successfully!"),setTimeout(()=>r(""),3e3),aa())},ag=async(a,b)=>{let{error:c}=await u.from("announcements").update({is_active:!b}).eq("id",a);c||aa()};return(0,b.jsx)(d.AdminLayout,{children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Content Manager"}),(0,b.jsx)("p",{className:"text-slate-400",children:"Manage announcements, quotes, and media"})]}),(0,b.jsxs)(C.Dialog,{open:m,onOpenChange:n,children:[(0,b.jsx)(C.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(f.Button,{onClick:()=>ac(),className:"bg-cyan-600 hover:bg-cyan-700",children:[(0,b.jsx)(H,{className:"w-4 h-4 mr-2"}),"Add Content"]})}),(0,b.jsxs)(C.DialogContent,{className:"bg-slate-800 border-slate-700 max-w-lg",children:[(0,b.jsxs)(C.DialogHeader,{children:[(0,b.jsx)(C.DialogTitle,{className:"text-white",children:o?"Edit Content":"Add New Content"}),(0,b.jsx)(C.DialogDescription,{className:"text-slate-400",children:"Create announcements, motivational quotes, or upload images"})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{className:"text-slate-200",children:"Type"}),(0,b.jsxs)(D.Select,{value:z,onValueChange:A,children:[(0,b.jsx)(D.SelectTrigger,{className:"bg-slate-700/50 border-slate-600 text-white",children:(0,b.jsx)(D.SelectValue,{})}),(0,b.jsxs)(D.SelectContent,{className:"bg-slate-800 border-slate-700 text-white",children:[(0,b.jsx)(D.SelectItem,{value:"announcement",children:"Announcement"}),(0,b.jsx)(D.SelectItem,{value:"quote",children:"Motivational Quote"}),(0,b.jsx)(D.SelectItem,{value:"reminder",children:"Reminder"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{className:"text-slate-200",children:"Title"}),(0,b.jsx)(g.Input,{value:v,onChange:a=>w(a.target.value),placeholder:"Enter title",className:"bg-slate-700/50 border-slate-600 text-white"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{className:"text-slate-200",children:"Content"}),(0,b.jsx)(i.Textarea,{value:x,onChange:a=>y(a.target.value),placeholder:"quote"===z?"Enter your motivational quote...":"Enter content details...",className:"bg-slate-700/50 border-slate-600 text-white min-h-24"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{className:"text-slate-200",children:"Image (Optional)"}),U?(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("img",{src:U||"/placeholder.svg",alt:"Preview",className:"w-full h-40 object-cover rounded-lg"}),(0,b.jsx)(f.Button,{type:"button",variant:"ghost",size:"icon",onClick:()=>{T(null),V(null),R("")},className:"absolute top-2 right-2 h-8 w-8 bg-slate-900/80 hover:bg-slate-900 text-white",children:(0,b.jsx)(Q.X,{className:"w-4 h-4"})})]}):(0,b.jsxs)("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed border-slate-600 rounded-lg cursor-pointer hover:border-cyan-500/50 hover:bg-slate-700/30 transition-colors",children:[(0,b.jsx)(P.Upload,{className:"w-8 h-8 text-slate-400 mb-2"}),(0,b.jsx)("span",{className:"text-sm text-slate-400",children:"Click to upload image"}),(0,b.jsx)("span",{className:"text-xs text-slate-500 mt-1",children:"PNG, JPG up to 5MB"}),(0,b.jsx)("input",{type:"file",accept:"image/*",onChange:a=>{let b=a.target.files?.[0];if(b){T(b);let a=new FileReader;a.onloadend=()=>{V(a.result)},a.readAsDataURL(b)}},className:"hidden"})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(h.Label,{className:"text-slate-200",children:"Active"}),(0,b.jsx)(B,{checked:Y,onCheckedChange:Z})]}),(0,b.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,b.jsx)(f.Button,{variant:"outline",onClick:()=>n(!1),className:"flex-1 border-slate-600 text-slate-300",children:"Cancel"}),(0,b.jsx)(f.Button,{onClick:ae,disabled:!v||!x||$||W,className:"flex-1 bg-cyan-600 hover:bg-cyan-700",children:W?"Uploading...":$?"Saving...":"Save"})]})]})]})]})]}),q&&(0,b.jsxs)(E.Alert,{className:"bg-green-500/10 border-green-500/50",children:[(0,b.jsx)(N.CheckCircle,{className:"h-4 w-4 text-green-400"}),(0,b.jsx)(E.AlertDescription,{className:"text-green-400",children:q})]}),s&&(0,b.jsxs)(E.Alert,{className:"bg-red-500/10 border-red-500/50",children:[(0,b.jsx)(O.AlertCircle,{className:"h-4 w-4 text-red-400"}),(0,b.jsx)(E.AlertDescription,{className:"text-red-400",children:s})]}),k?(0,b.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-cyan-500"})}):0===a.length?(0,b.jsx)(e.Card,{className:"bg-slate-800/50 border-slate-700",children:(0,b.jsxs)(e.CardContent,{className:"py-12 text-center",children:[(0,b.jsx)(M.Megaphone,{className:"w-12 h-12 text-slate-600 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-slate-400",children:"No content yet. Add your first announcement!"})]})}):(0,b.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(a=>{let c=(a=>{switch(a){case"quote":return L;case"reminder":return K.Bell;default:return M.Megaphone}})(a.type);return(0,b.jsxs)(e.Card,{className:`bg-slate-800/50 border-slate-700 ${!a.is_active?"opacity-60":""}`,children:[a.image_url&&(0,b.jsx)("div",{className:"aspect-video relative overflow-hidden rounded-t-lg",children:(0,b.jsx)("img",{src:a.image_url||"/placeholder.svg",alt:a.title,className:"w-full h-full object-cover"})}),(0,b.jsxs)(e.CardHeader,{className:"pb-2",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"p-1.5 bg-cyan-500/20 rounded",children:(0,b.jsx)(c,{className:"w-4 h-4 text-cyan-400"})}),(0,b.jsx)("span",{className:"text-xs text-slate-400 capitalize",children:a.type})]}),(0,b.jsx)(B,{checked:a.is_active,onCheckedChange:()=>ag(a.id,a.is_active)})]}),(0,b.jsx)(e.CardTitle,{className:"text-white text-lg mt-2",children:a.title})]}),(0,b.jsxs)(e.CardContent,{children:[(0,b.jsx)("p",{className:"text-sm text-slate-400 line-clamp-3 mb-4",children:a.content}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-xs text-slate-500",children:new Date(a.created_at).toLocaleDateString()}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(f.Button,{variant:"ghost",size:"icon",onClick:()=>ac(a),className:"h-8 w-8 text-slate-400 hover:text-white",children:(0,b.jsx)(I,{className:"w-4 h-4"})}),(0,b.jsx)(f.Button,{variant:"ghost",size:"icon",onClick:()=>af(a.id),className:"h-8 w-8 text-slate-400 hover:text-red-400",children:(0,b.jsx)(J,{className:"w-4 h-4"})})]})]})]})]},a.id)})})]})})}a.s(["default",()=>R],50244)}];

//# sourceMappingURL=app_admin_content_page_tsx_ab157af7._.js.map